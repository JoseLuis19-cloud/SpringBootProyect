<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
	<head>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/webjars/org.webjars/bootstrap/4.5.3/css/bootstrap.min.css">
	<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.5.3/css/bootstrap.min.css}" />
	
	  
  	<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/1.14.3/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/4.5.3/js/bootstrap.min.js}"></script>
	
  <style> 
  
   
   .form-control-xs {
    height: calc(1em + .375rem + 2px) !important;
    padding: .125rem .25rem !important;
    font-size: .75rem !important;
    line-height: 1.5;
    border-radius: .2rem;
	}
	
	h3 {
  		font-weight: bold !important;
  		color: #495057 !important;
  		font-size: 30px !important;
  		
  		border-bottom: 2px solid #000 !important;
 		background:#e9ecef !important;
  		color:#003B49 !important;

  		display:inline-block !important;
  		padding:8px 20px !important;
 		margin-left:10px !important;
		}
		
	h5 {
  		color: #F2A900 !important;
  		font-size: 26px !important;
  		
 		background:#e9ecef !important;
  		color:#F2A900 !important;

  		display:inline-block !important;
  		padding:3px 15px !important;
 		margin-left:10px !important;
		}
  </style>	
		
	<script th:inline="javascript">
		
		var arrValueCheck = null;
		var arrValueCheckASupr  = null;
	 	var idMenuSelec = "";

		$(document).ready(function() {

			  $('[name="checks[]"]').click(function() {
			      arrValueCheck = $('[name="checks[]"]:checked').map(function(){
			      return this.value;
			    }).get();
			     
			  // var str = arrValueCheck.join(',');
			  //  $('#arr').text(JSON.stringify(arr));
			  //  $('#str').text(str);
			  });
			  
			  $('[name="checksMenuUsu[]"]').click(function() {
				  arrValueCheckASupr = $('[name="checksMenuUsu[]"]:checked').map(function(){
			      return this.value;
			    }).get();
			  
			  });
			 
			 $("#idLinkAnadirTodos").click(function() {
				 alert("boton idLinkAnadirTodos");
				 
				 $("input[id^='idCheckActivado']").prop("checked", true);
				 
				 document.getElementById("idP3").style.display = "block";
				 $("#myModalConfirm").modal();
				 
			  });
			 
			 $("#idLinkConfirmar").click(function() {
				    alert("boton confirmar");
				  });

			});
		
		function anadirElemenSubMenuUsu()
	  	 {
			if (arrValueCheck == null)
				{
				 alert("Debe seleccionar al menos un elemento a añadir"); 
				 return;
				}
			 else
			  {
				if (arrValueCheck.length == 0)
					{
					 alert("Debe seleccionar al menos un elemento a añadir");
					 return;
					}
				else
					{
					 document.getElementById("idP1").style.display = "block";
					 $("#myModalConfirm").modal();
					}
				
				//	for (var i=0; i<arrValueCheck.length; i++)
				//	 {
				//	  idMenuSelec = arrValueCheck[i];
			   	//   }
			  }
	  	 }
		
		function eliminarElemenSubMenuUsu()
	  	 {
			if (arrValueCheckASupr == null)
				{
				 alert("Debe seleccionar al menos un elemento a suprimir"); 
				}
			 else
			  {
				if (arrValueCheckASupr.length == 0)
					{
					 alert("Debe seleccionar al menos un elemento a suprimir");
					}
				else
					{
					 document.getElementById("idP2").style.display = "block";
					 $("#myModalConfirm").modal();
					}
			    	//	for (var i=0; i<arrValueCheckASupr.length; i++)
					// {
					//	idMenuSelecSuprimir = arrValueCheckASupr[i];
			   	 	// }
	  			}
		}
		
		function confirmarMenuUsuario()
	  	 {
		 // Submitir formulario
		 document.getElementById("idFormMenuUsuario").submit();
	  	 }
	</script>

</head>

  <body>
  
   <div th:insert="Aplicacion/fragments/BotoneraMenuCabecera2 :: menucabecera"></div>
	
	<div class="container-fluid">

		<div class="row">
			<div class="col-1"></div>
 			 <div class="col-10"><h3 th:text="'Gestión de elementos submenus del menu: ' + ${nomMenuPrincipal} + ' para el usuario: ' + ${nomUsuario}"></h3></div>
			<div class="col-1"></div>
		</div>
		
		<div class="row">
			<div class="col-1"></div>
  			<div class="col-4">
  				<h5 th:text="'Elementos del submenú ya activas:'"></h5>
  				<div id="idDivSubMenu1Usu">
					<div th:insert="gestionMenus/fragments/SubMenusSelecUsuario :: submenuselecusuario"></div>
				</div>	
			</div>
 			<div class="col-2" style="text-align: center">
 				<div class="btn-group-vertical" role="group" aria-label="Vertical button group">
 					<br/>
 					<br/>
 					<br/>
				 	<a th:id="'idLinkAnadir'"   th:name="'linkAnadir'"  th:onclick="th:anadirElemenSubMenuUsu()"  class="btn btn-primary btn-sm" role="button"> < Añadir</a>
				 	<br/>
					<a th:id="'idLinkSuprimir'" th:name="'linkSuprimir'" th:onclick="th:eliminarElemenSubMenuUsu()" class="btn btn-primary btn-sm" role="button">Suprimir ></a>
					<br/>
					<a th:id="'idLinkAnadirTodos'" th:name="'linkAnadirTodos'"  class="btn btn-primary btn-sm" role="button"> < Añadir todos</a>
					<br/>
				</div>
 			</div>
 			<div class="col-4">
 				<h5 th:text="'Opciones del submenu disponibles'"></h5>
 				<div th:insert="gestionMenus/fragments/SubMenusAplicaDispUsuario :: submenuapliselecusuario"></div>
 			</div>
 			<div class="col-1"></div>
		</div>
		
		<div class="row" style="border-top: 2px solid #000">
			<div class="col-1"></div>
 			 <div class="col-10"> 
  			   <a th:id="'idVolver'" th:href="@{/gestionmenususuario/obtenermenusuario}" class="btn btn-primary" role="button">Volver</a>
 			 </div>
 			<div class="col-1"></div>
 		</div>
		
   </div>
   
    <!-- Modal Confirmación -->
  <div id="myModalConfirm" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirmación elementos menu</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<p th:id="'idP1'" style="display:none;"> ¿Confirmar que quiere añadir los elementos de submenu seleccionados a submenu este usuario?.</p>
      	<p th:id="'idP2'" style="display:none;"> ¿Confirmar que quiere suprimir los elementos de submenu seleccionados a submenu este usuario?.</p>
      	<p th:id="'idP3'" style="display:none;"> ¿Confirmar que quiere añadir todos los elementos de submenu a este usuario?.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Cancelar</button>
        <button type="button" th:onclick="th:confirmarMenuUsuario()" class="btn btn-primary">Confirmar</button>
      </div>
    </div>
  </div>
</div>
	 	
	</body>
</html>
