<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
  <head>

	<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.5.3/css/bootstrap.min.css} " />
	<link href="../static/css/CustomBootstrap.css" th:href="@{/css/CustomBootstrap.css}" rel="stylesheet" />

<!-- Special version of Bootstrap that only affects content wrapped in .bootstrap-iso -->
	<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" /> 
<!--Font Awesome (added because you use icons in your prepend/append)-->
	<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
<!-- Inline CSS based on choices in "Settings" tab -->

 <style>
 
.bootstrap-iso .formden_header h2, .bootstrap-iso .formden_header p, .bootstrap-iso form{font-family: Arial, Helvetica, sans-serif; color: black}.bootstrap-iso form button, .bootstrap-iso form button:hover{color: #000000 !important;} .asteriskField{color: red;}


.form-control-xs {
	height: calc(1em + .375rem + 2px) !important;
	padding: .125rem .25rem !important;
	font-size: .75rem !important;
	line-height: 1.5;
	border-radius: .2rem;
}

h3 {
	font-weight: bold !important;
	color: #495057 !important;
	font-size: 30px !important;
	border-bottom: 2px solid #000 !important;
	background: #e9ecef !important;
	color: #003B49 !important;
	display: inline-block !important;
	padding: 8px 20px !important;
	margin-left: 10px !important;
}

h5 {
	color: #F2A900 !important;
	font-size: 26px !important;
	background: #e9ecef !important;
	color: #F2A900 !important;
	display: inline-block !important;
	padding: 3px 15px !important;
	margin-left: 10px !important;
   }

</style>

	<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/1.14.3/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/4.5.3/js/bootstrap.min.js}"></script>
	
	 <script th:inline="javascript">
	 
	 /*<![CDATA[*/
		 var empDispoPro = [[${lprueba}]];
		 console.log("a");
		 console.log(empDispoPro);

	/*]]>*/	
	
		 var person = {
            Name: "1",
            Address: "2"
        }
	
	 	$(document).ready(function() {	
	 		
	 		$('[name="checkEmpresaDis[]"]').click(function() {
	 		    alert("check 1");
			    arrValueCheck = $('[name="checkEmpresaDis[]"]:checked').map(function(){
			    return this.value;
			 }).get();
			    
			 alert(arrValueCheck);
			// var str = checkEmpresaDis.join(',');
			// $('#arr').text(JSON.stringify(arr));
			// $('#str').text(str);
	 	 });
	 		
	 		$( "#idLinkAnadir").click(function() {
	 		 	alert("pinchado");
	 			// $("#idDivEmpresasUTE").load('/gestionWeb/proyectos/anadirempresajax', '1');
	 			
	 		//	var obj = { customer: search };
    	//		var data2send = JSON.stringify(obj);
    			
    			console.log(person);
    			
    		//	 data : {"idEmpresa" : '1', 
	        //    	    "search" : JSON.stringify(search) },

	 	//	 var reservationJson = $('#form-signin').serialize();
	 	   		$.ajax({
	 	           // type : "POST",
	 	            contentType : "application/json; charset=utf-8", 
	 	            url : "/gestionWeb/proyectos/anadirempresajax",
	 	            data : {"search" : JSON.stringify(person) },
	 	            dataType : 'json',
	 	            timeout : 100000,
	 	            success : function(data) {
	 	              console.log("SUCCESS: ", data);
	 	            },
	 	            error : function(e) {
	 	              console.log("ERROR: ", e);
	 	            },
	 	            done : function(e) {
	 	              console.log("DONE");
	 	            }
	 	          });
	 	   
	 		});
	 		
	 		
	 		$( "#idLinkSuprimir").click(function() {
	 		    alert("pinchado");
	 	   		$.ajax({
	 	       //   type : "POST",
	 	            contentType : "application/json",
	 	            url : "/gestionWeb/proyectos/suprimirempresajax",
	 	            data : {"idEmpresa" : '1'},
	 	            dataType : 'json',
	 	            timeout : 100000,
	 	            success : function(data) {
	 	              console.log("SUCCESS: ", data);
	 	            },
	 	            error : function(e) {
	 	              console.log("ERROR: ", e);
	 	            },
	 	            done : function(e) {
	 	              console.log("DONE");
	 	            }
	 	          });
	 	   
	 		});
	 		
	 	});	 	 
	 	
	// 	function anadirEmpresaAjax()
	//    {
	//     alert("Buenas");
	// 	 var urlAjax = '/gestionWeb/proyectos/anadirEmpresajax';
	// 	 urlAjax = urlAjax + '/'  + '1';
	// 	 alert(urlAjax);
	// 	 $("#idDivEmpresasUTE").load(urlAjax);
	 //   }
	</script>
	
</head>

 <body>
	<div th:insert="Aplicacion/fragments/BotoneraMenuCabecera2 :: menucabecera"></div>
	
	<div class="container-fluid" style="margin-top:0px;">
		<div class="row">
			<div class="titulo-pag2">Gestión de Proyectos</div>
		</div>
		<form th:action="@{/gestionWeb/empleados/modifproyecto}" th:object="${datosProyectoWeb}" method="post">
		<div class="row">
			<br>
			<div class="col-1"></div>
  			<div class="col-10" >
  				<div class="subtitulo-pag2">Datos del Nuevo Proyecto</div>
  			</div>
  			<div class="col-1"></div>
  		</div>
  		
		<div class="row">
			<div class="col-1"></div>
  			<div class="col-10" style="border-bottom: 2px solid #000; border-top: 2px solid #000">
  				<div class="form-row">
  				
						<div class="col-md-3 mb-5">
							<label for="validationProyecto" th:text="'Nombre Proyecto'"></label> 
							<input type="text" class="form-control" id="idNombreProyecto" th:field="*{nomProyectoWeb}" th:maxlength="30" required>
						</div>
						
						<div class="col-md-3 mb-5">
							<label for="validationUbiProyecto" th:text="'Ubicacion Proyecto'"></label> 
							<input type="text" class="form-control" id="idUbicacionProyecto" th:field="*{ubicacionProyectoWeb}" th:maxlength="30" required>
						</div>
						
						<div class="col-md-2 mb-5">
							<label for="validationImpProyecto" th:text="'Importe Proyecto'"></label> 
							<input type="text" class="form-control" id="idImpProyecto" th:field="*{impProyectoWeb}" th:maxlength="14">
						</div>
						
						<div class="col-md-2 mb-5">
							<label for="labelFecIniProyecto" th:text="'Fecha Inicio del proyecto' "></label>
							<div class="input-group">
								<div class="input-group-addon">
       							 <i class="fa fa-calendar"> </i> 
      					 		</div>
       							<input class="form-control" id="idFecIniProyecto" name="fecIniProyecto" placeholder="MM/DD/YYYY" type="text" th:readonly="true" required />
								<input type="hidden" id="idFecIniProyectoHidden" name="fecIniProyectoHidden"  th:field="*{fecIniProyectoWeb}"/>
							</div>
						</div>
						
						<div class="col-md-2 mb-5">
						   <label for="labelFecFinProyecto" th:text="'Fecha Fin del proyecto' "></label>
							<div class="input-group">
								<div class="input-group-addon">
       							 <i class="fa fa-calendar"> </i> 
      					 		</div>
       							<input class="form-control" id="fecFinProyecto" name="fecFinProyecto" placeholder="MM/DD/YYYY" type="text" th:readonly="true" required />
								<input type="hidden" id="idFecIniProyectoHidden" name="fecFinProyectoHidden"  th:field="*{fecFinProyectoWeb}"/>
							</div>
						</div>
				</div>
		   	
				<div class="form-row">
					<div class="col-md-5 mb-3">
						<div id="idDivEmpresasDis">
							<div class="subtitulo-pag3">Añadir Empresa participante en el proyecto</div>
						<div th:insert="GestionWeb/fragments/anadirEmpresaProyecto :: anadirEmprProyecto"></div>
						</div>
			 		</div>
				
					<div class="col-md-2 mb-3">
						<div class="btn-group-vertical" role="group" aria-label="Vertical button group">
 						<br/>
 						<br/>
				 		<a th:id="'idLinkAnadir'"   th:name="'linkAnadir'"  class="btn btn-primary btn-sm" role="button"> Añadir &#8680;</a>
						<br/>
						<a th:id="'idLinkSuprimir'"  th:name="'linkSuprimir'" th:onclick="eliminarEmpresaAjax()" class="btn btn-colour-1" role="button">&#8678; Suprimir </a>
						<br/>
						</div>
					</div>
					
					<div class="col-md-5 mb-3">
						<div id="idDivEmpresasUTE">
							<div class="subtitulo-pag3">UTE de empresas que forman del proyecto</div>
							<div th:insert="GestionWeb/fragments/SeleccionEmpresasProyecto :: SelecEmprProyecto"></div>	
						</div>
					</div>
				</div>
				
				<div class="form-row">
					<div class="col-md-5 mb-3">
						<div id="idDivSubMenu1Usu">
						<div class="subtitulo-pag3"> Añada un empleado Beigar al proyecto</div>
						<div th:insert="GestionWeb/fragments/anadirEmpleadoProyecto :: anadirEmplProyecto"></div>
						</div>
			 		</div>
				
					<div class="col-md-2 mb-3">
						<div class="btn-group-vertical" role="group" aria-label="Vertical button group">
 						<br/>
 						<br/>
				 		<a th:id="'idLinkAnadir'"   th:name="'linkAnadir'"  th:onclick="anadirEmpresaProyecto()" class="btn btn-primary btn-sm" role="button"> &#8678; Añadir</a>
						<br/>
						<a th:id="'idLinkSuprimir'"  th:name="'linkSuprimir'" th:onclick="eliminarEmpresaProyecto()" class="btn btn-colour-1" role="button">Suprimir &#8680;</a>
						<br/>
						</div> 
					</div>
					
					<div class="col-md-5 mb-3">
						<div id="idDivEmpleadoDis">
						 <div class="subtitulo-pag3">Empleados asignados de Beigar al proyecto</div>
							<div th:insert="GestionWeb/fragments/SeleccionEmpleadoProyecto :: SelecEmplProyecto"></div>	
						</div>
					</div>
				</div>
				
			</div>
			<div class="col-1"></div>	
		</div>

 		<div class="row">
 			<div class="col-1"></div>
 			<div class="col-2"><a th:href="@{/gestionWeb/empresas/pagempresas}" class="btn btn-primary" role="button">Volver</a></div>
 			<div class="col-5"></div>
 		</div>
 				
 		</form>
	</div>
	
	<!-- Modal -->
    <div id="myModalAnadirEmpresas" class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
  		<div class="modal-dialog modal-xl">
      <!-- Modal content-->
      	<div class="modal-content">
      		<form action="#" th:action="@{/gestionWeb/empresa/pagempresas}" method="post" th:object="${elemenMenuNuevoWeb}">
      	
        	<div class="row">
				<div class="titulo-pag2">Empresas</div>
			</div>

		<div class="row">
  			<div class="form-group mx-sm-3 mb-2">
    			<label for="buscarEmpresa" th:text="'  Empresa:  '"></label>
    			<input type="text" class="form-control" th:id="idBuscarEmpresa" th:name="buscarEmpresa" th:maxlength="25" th:field="*{nomEmpresa}" >
    			<button type="submit" class="btn btn-primary">Buscar</button>    
 			</div>	
  		</div> 
	
		<div class="row"> 
			<div class="panel panel-default" style="border-bottom: 2px solid #000">
				<table class="table table-sm">
					<thead class="thead-light">
						<tr>
							<th th:text="'Cod. Empresa'"></th>
							<th th:text="'Nombre Empresa'"></th>
							<th th:text="'CIF'"></th>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${pagGenerica.empty}">
							<td colspan="9">No hay empresas</td>
						</tr>
						<tr th:each="empresa:${pagGenerica.content}">
							<td th:text="${empresa.idEmpresa}"></td>
							<td th:text="${empresa.nomEmpresa}"></td>
							<td th:text="${empresa.cif}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		
	<div class="row">
	 <div th:insert="Aplicacion/fragments/BotoneraPaginacion :: botonerapaginacion"></div>
	</div>
   </form>	
   
    </div>
    </div>
   </div>
 		
<!-- Include Date Range Picker -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>

 <script>
    $(document).ready(function(){
        var date_input=$('input[name="fecIniProyecto"]'); //our date input has the name "date"
        var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
        date_input.datepicker({
            format: 'dd/mm/yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
        });
        
        var date_input=$('input[name="fecFinProyecto"]'); //our date input has the name "date"
        var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
        
        date_input.datepicker({
            format: 'dd/mm/yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
        });
   
    });
     
 </script>

</body>
</html>