<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
		<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.5.3/css/bootstrap.min.css}" />
	<link href="../static/css/CustomBootstrap.css" th:href="@{/css/CustomBootstrap.css}" rel="stylesheet" />
	
	<link th:rel="stylesheet" th:href="@{/webjars/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker3.css}"/>
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker3.standalone.css}"/>
    
    <script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/1.14.3/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/4.5.3/js/bootstrap.min.js}"></script>
	
<style> 	
	h3 {
  		font-weight: bold !important;
  		color: #495057 !important;
  		font-size: 30px !important;
  		
  		border-bottom: 2px solid #000 !important;
 		background:#e9ecef !important;
  		color:#003B49 !important;

  		display:inline-block !important;
  		padding:8px 20px !important;
 		margin-left:10px !important;
		}
		
	h5 {
  		color: #F2A900 !important;
  		font-size: 26px !important;
  		
 		background:#e9ecef !important;
  		color:#F2A900 !important;

  		display:inline-block !important;
  		padding:3px 15px !important;
 		margin-left:10px !important;
		}
  </style>
  
  	<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/1.14.3/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/4.5.3/js/bootstrap.min.js}"></script>
	
	  
	<script th:inline="javascript">
		function confirReativarUsuario()
	  	 {
		 // Submitir formulario
		    document.getElementById("idUsuarioHisHidden").value = "1";
		 	alert("1111");
			document.getElementById("idFormReactivarUsuario").submit();
	  	 }
		function reactivarUsu()
	  	 {
		  $("#myModalConfirm").modal();
	  	 }
	</script>  	 
	  	 
</head>

<body>
	<div th:insert="Aplicacion/fragments/BotoneraMenuCabecera2 :: menucabecera"></div>
 
	<div class="container-fluid">
	
	 <div class="row">
		<div class="titulo-pag2" th:text="'Gestion usuarios aplicación: '"></div>
	 </div>
	 <div class="row">
	 
	 <form th:id="idFormReactivarUsuario" th:action="@{/gestionWeb/usuarios/reactivarusuario}" method="post">
		 <input type="hidden" th:id="'idUsuarioHisHidden'" 	th:name="'usuarioHisHidden'" th:value="1" />
	 </form> 
	 
	<div class="col-sm-1"></div>
		<div class="col-sm-10">
		<div class="panel panel-default" style="border-bottom: 2px solid #000">
			<div class="subtitulo-pag" th:text="'Histórico de usuarios de la aplicación'"></div>
		<table class="table table-sm">
			<thead class="thead-light">
				<tr>
					<th th:text="'Nombre/Alias'"></th>
					<th th:text="'Usuario'"></th>
					<th th:text="'roles en aplicación'"></th>
					<th th:text="'email'"></th>
					<th th:text="'fecha baja usuario'"></th>
					<th th:text="'activar'"></th>
				</tr>
			</thead>

			<tbody class="table-striped">
				<tr th:if="${pagUsuarios.empty}">
					<td colspan="4">No hay Usuarios de baja en la aplicación</td>
				</tr>

				<tr th:each="users:${pagUsuarios}">
					<td th:text="${users.fullName}"></td>
					<td th:text="${users.username}"></td>
					<td>
						<li th:each="elementRole : ${users.roles}">
    						<span th:text="${elementRole.name}"></span>
						</li>
					</td>
					<td th:text="${users.email}"></td>
					<td th:text="${#calendars.format(users.fecBajaUsuario, 'dd/MM/yyyy')}"></td>
					<td><a th:onclick="reactivarUsu();" class="btn btn-primary" role="button">reactivar</a></td>
				 </tr>
			 </tbody>
			</table>
			</div>
			
			</div>
			<div class="col-sm-1"></div>
		 </div>
		
		 <div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-10">
				<a th:href="@{/gestionWeb/usuarios/forminsertarusuario}" class="btn btn-primary" role="button">Nuevo</a>
			</div>
			<div class="col-sm-1"></div>
		 </div>
	</div>
	
	  <!-- Modal Confirmación -->
  <div id="myModalConfirm" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Reactivación Usuario</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      	<p th:id="'idP1'"> ¿Reactivar el usuario en la aplicación?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Cancelar</button>
        <button type="button" th:onclick="confirReativarUsuario()" class="btn btn-primary">Confirmar</button>
      </div>
    </div>
  </div>
</div>
	
	
</body>
</html>
